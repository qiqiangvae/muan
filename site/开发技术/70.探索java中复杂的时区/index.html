
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../60.Python%E7%AE%80%E5%8D%95%E5%B0%8F%E5%8A%9F%E8%83%BDCoding/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>探索java中复杂的时区 - 作草分茶</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#java" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="作草分茶" class="md-header__button md-logo" aria-label="作草分茶" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            作草分茶
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              探索java中复杂的时区
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Java/" class="md-tabs__link">
          
  
  Java

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Linux/20.Linux%E4%B8%8B%E9%80%9A%E7%94%A8jar%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC/" class="md-tabs__link">
          
  
  Linux

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/" class="md-tabs__link">
          
  
  中间件

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/" class="md-tabs__link">
          
  
  前沿技术

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/1.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6/" class="md-tabs__link">
          
  
  博客

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../1.%E5%BC%80%E5%8F%91%E8%BD%AF%E4%BB%B6%E5%92%8C%E9%85%8D%E7%BD%AE%E5%88%86%E4%BA%AB/" class="md-tabs__link">
          
  
  开发技术

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="作草分茶" class="md-nav__button md-logo" aria-label="作草分茶" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    作草分茶
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Java
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    JVM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            JVM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/JVM/Jvm%E8%B0%83%E4%BC%98%E6%80%BB%E7%BB%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jvm 调优总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/JVM/NIO%E6%B5%8B%E8%AF%95%E5%A0%86%E5%86%85%E5%86%85%E5%AD%98%E5%92%8C%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NIO 测试堆内内存和直接内存
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    工具使用
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            工具使用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/10.Arthas%E7%BA%BF%E4%B8%8A%E6%8E%92%E6%9F%A5%E7%BB%8F%E9%AA%8C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arthas线上排查经验
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    工具类
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            工具类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E5%B7%A5%E5%85%B7%E7%B1%BB/10.%E6%99%BA%E8%83%BD%E6%97%A5%E6%9C%9F%E8%AF%86%E5%88%AB%E5%B7%A5%E5%85%B7%E7%B1%BB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    智能日期识别工具类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E5%B7%A5%E5%85%B7%E7%B1%BB/30.%E6%97%B6%E9%97%B4%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7%E7%B1%BB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    时间转换工具类
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    并发
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            并发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E5%B9%B6%E5%8F%91/10.%E9%80%A0%E7%81%AB%E7%AE%AD%E4%BB%8Esynchronized%E5%BC%80%E5%A7%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    造火箭从synchronized开始
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E5%B9%B6%E5%8F%91/20.ArrayBlockingQueue%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ArrayBlockingQueue 阻塞队列
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    编码
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            编码
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E7%BC%96%E7%A0%81/10.Java%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A0%81%E6%8A%80%E5%B7%A7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java常用编码技巧
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    网络
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/%E7%BD%91%E7%BB%9C/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%9A%84%E6%BC%94%E8%BF%9B%E5%8F%B2%E5%92%8Cepoll/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java 网络编程的演进史和 epoll
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/20.Linux%E4%B8%8B%E9%80%9A%E7%94%A8jar%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux 下通用 jar 启动脚本
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    命令
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            命令
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/%E5%91%BD%E4%BB%A4/10.Linux%E7%AE%80%E5%8D%95%E6%9C%89%E8%B6%A3%E7%9A%84%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux 简单有趣的命令
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    中间件
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            中间件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中间件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Clickhouse
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Clickhouse
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/clickhouse/10.ClickHouse%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ClickHouse 入门教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Grafana
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Grafana
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/grafana/Grafana%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grafana 安装及使用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mysql
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Mysql
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/mysql/10.Mysql-next-key-lock%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mysql next-key lock加锁规则
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/mysql/20.Mysql%E5%AE%89%E8%A3%85%E6%80%BB%E7%BB%93%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mysql 安装总结教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/mysql/30.%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%ADmysql%E6%AD%BB%E9%94%81%E6%8E%92%E6%9F%A5%E6%B1%87%E6%80%BB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开发过程中mysql死锁排查汇总
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/mysql/40.Mysql%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4%E5%92%8Csql%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mysql 一些命令和sql记录
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Nginx
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Nginx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/nginx/10.nginx%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nginx入门教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Prometheus
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Prometheus
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/prometheus/Prometheus-PromQL%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prometheus PromQL 语法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/prometheus/Prometheus%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prometheus入门
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Redis
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Redis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%B8%AD%E9%97%B4%E4%BB%B6/redis/10.%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E6%90%9E%E6%87%82Redis%E4%BB%8E%E9%9D%A2%E8%AF%95%E5%88%B0%E5%BA%94%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    一篇文章搞懂 Redis 从面试到应用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    前沿技术
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            前沿技术
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    前沿技术
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Llm
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Llm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/llm/%2010.%E6%9C%AC%E5%9C%B0%E4%BD%BF%E7%94%A8OLLAMA%E6%90%AD%E5%BB%BA%E5%A4%A7%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    本地使用OLLAMA搭建大模型
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    云原生
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            云原生
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/1.docker%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 基本使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/10.k8s-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k8s 常用命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/2.docker%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker 代理服务器配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/20.k8s%E4%B9%8BJob%E4%B8%8ECronJob/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k8s之Job与CronJob
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/30.Macos-minikube/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Macos-minikube
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/50.Ubuntu%E4%BD%BF%E7%94%A8kubeadm%E5%AE%89%E8%A3%85k8s%E9%9B%86%E7%BE%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu使用kubeadm安装k8s集群
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/60.%E6%8E%A2%E7%B4%A2k8s%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    探索k8s过程中的问题和解决方案
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/70.k8s%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k8s持久化存储
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/80.k8s%E4%BD%BF%E7%94%A8StatefulSet%E6%90%AD%E5%BB%BARedis%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k8s 使用 StatefulSet 搭建 Redis 主从模式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%89%8D%E6%B2%BF%E6%8A%80%E6%9C%AF/%E4%BA%91%E5%8E%9F%E7%94%9F/90.K8s%E9%83%A8%E7%BD%B2%E5%8D%95%E6%9C%BAMysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K8s部署单机Mysql
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    博客
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    系统架构
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            系统架构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/1.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机硬件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/2.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    操作系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/3.%E6%95%B0%E6%8D%AE%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/4.%E5%B5%8C%E5%85%A5%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    嵌入式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/5.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机网络
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/6.%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%80%A7%E8%83%BD%E8%AF%84%E4%BB%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    系统配置与性能评价
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E5%AE%A2/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/7.%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    信息系统基础知识
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    开发技术
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            开发技术
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%E5%BC%80%E5%8F%91%E8%BD%AF%E4%BB%B6%E5%92%8C%E9%85%8D%E7%BD%AE%E5%88%86%E4%BA%AB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开发软件和配置分享
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10.%E4%BD%8D%E8%BF%90%E7%AE%97%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    位运算基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../30.Git%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git 常用操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../40.%E6%89%8B%E5%86%99%E5%B8%B8%E7%94%A8%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    手写常用的负载均衡算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../50.HTTP%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP相关知识点记录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../60.Python%E7%AE%80%E5%8D%95%E5%B0%8F%E5%8A%9F%E8%83%BDCoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python简单小功能Coding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    探索java中复杂的时区
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    探索java中复杂的时区
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一些常见的时间（时区）概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一些常见的时间（时区）概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gmt" class="md-nav__link">
    <span class="md-ellipsis">
      GMT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc" class="md-nav__link">
    <span class="md-ellipsis">
      UTC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cst-ctt" class="md-nav__link">
    <span class="md-ellipsis">
      CST 和 CTT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iso" class="md-nav__link">
    <span class="md-ellipsis">
      ISO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asiashanghai" class="md-nav__link">
    <span class="md-ellipsis">
      Asia/Shanghai
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java_1" class="md-nav__link">
    <span class="md-ellipsis">
      看看 Java 里的时间秘密
    </span>
  </a>
  
    <nav class="md-nav" aria-label="看看 Java 里的时间秘密">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#date" class="md-nav__link">
    <span class="md-ellipsis">
      时间戳和 Date 长什么样子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#date_1" class="md-nav__link">
    <span class="md-ellipsis">
      不同时区对 Date 有什么影响
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jackson" class="md-nav__link">
    <span class="md-ellipsis">
      Jackson 时间序列化盲点
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jackson 时间序列化盲点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    <span class="md-ellipsis">
      将对象转 String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string_1" class="md-nav__link">
    <span class="md-ellipsis">
      将 String 转对象
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spring-datetimeformat" class="md-nav__link">
    <span class="md-ellipsis">
      Spring 中的 DateTimeFormat 到底怎么用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Spring 中的 DateTimeFormat 到底怎么用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#param" class="md-nav__link">
    <span class="md-ellipsis">
      表单或 Param 方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#body" class="md-nav__link">
    <span class="md-ellipsis">
      Body 方式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      接口中的时间字段怎么交互最合理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      一些常见的时间（时区）概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一些常见的时间（时区）概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gmt" class="md-nav__link">
    <span class="md-ellipsis">
      GMT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc" class="md-nav__link">
    <span class="md-ellipsis">
      UTC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cst-ctt" class="md-nav__link">
    <span class="md-ellipsis">
      CST 和 CTT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iso" class="md-nav__link">
    <span class="md-ellipsis">
      ISO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asiashanghai" class="md-nav__link">
    <span class="md-ellipsis">
      Asia/Shanghai
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java_1" class="md-nav__link">
    <span class="md-ellipsis">
      看看 Java 里的时间秘密
    </span>
  </a>
  
    <nav class="md-nav" aria-label="看看 Java 里的时间秘密">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#date" class="md-nav__link">
    <span class="md-ellipsis">
      时间戳和 Date 长什么样子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#date_1" class="md-nav__link">
    <span class="md-ellipsis">
      不同时区对 Date 有什么影响
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jackson" class="md-nav__link">
    <span class="md-ellipsis">
      Jackson 时间序列化盲点
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jackson 时间序列化盲点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    <span class="md-ellipsis">
      将对象转 String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string_1" class="md-nav__link">
    <span class="md-ellipsis">
      将 String 转对象
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spring-datetimeformat" class="md-nav__link">
    <span class="md-ellipsis">
      Spring 中的 DateTimeFormat 到底怎么用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Spring 中的 DateTimeFormat 到底怎么用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#param" class="md-nav__link">
    <span class="md-ellipsis">
      表单或 Param 方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#body" class="md-nav__link">
    <span class="md-ellipsis">
      Body 方式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      接口中的时间字段怎么交互最合理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="java">探索java中复杂的时区</h1>
<h2 id="_1">一些常见的时间（时区）概念</h2>
<h3 id="gmt">GMT</h3>
<p>又称格林尼治平均时间或格林尼治标准时间，旧译格林威治标准时间。
GMT是根据地球的自转和公转来计算时间，指位于英国伦敦郊区的皇家格林尼治天文台的标准时间，因为本初子午线被定义在通过那里的经线</p>
<h3 id="utc">UTC</h3>
<p>UTC 全称 Universal Time Coordinated ，中文名协调世界时间，又称世界统一时间、世界标准时间、国际协调时间。是最主要的世界时间标准，其以原子时秒长为基础，在时刻上尽量接近于格林尼治标准时间。
UTC是根据原子钟来计算时间。</p>
<h3 id="cst-ctt">CST 和 CTT</h3>
<p>北京时间，China Standard Time，中国标准时间，在时区划分上，属东八区，比协调世界时早8小时，记为UTC+8。
不过这个CST这个缩写比较纠结的是它可以同时代表四个不同的时间：</p>
<ol>
<li>Central Standard Time (USA) UT-6:00</li>
<li>Central Standard Time (Australia) UT+9:30</li>
<li>China Standard Time UT+8:00</li>
<li>Cuba Standard Time UT-4:00</li>
</ol>
<p>所以为了避免歧义，现在有些地方用 CTT 来指代中国时区。</p>
<h3 id="iso">ISO</h3>
<p>ISO 是一种时间格式，现在用的是 ISO 8601 版本，格式如下;</p>
<pre><code>YYYY-MM-DDThh:mm:ss[.mmm]TZD
</code></pre>
<h3 id="timestamp">Timestamp</h3>
<p>Timestamp 中文名是时间戳，是指格林威治时间1970年01月01日00时00分00秒起至当下的总秒数。<strong>是一个绝对时间</strong>。</p>
<h3 id="asiashanghai">Asia/Shanghai</h3>
<p><strong>Asia/Shanghai是已地区命名的地区标准时，在中国叫CST</strong>。 这个地区标准时会兼容历史各个时间节点。
中国1986-1991年实行夏令时，夏天和冬天差1个小时，Asia/Shanghai会兼容这个时间段。</p>
<h2 id="java_1">看看 Java 里的时间秘密</h2>
<p>以下测试代码都是以 JDK17 运行的。</p>
<h3 id="date">时间戳和 Date 长什么样子</h3>
<pre><code class="language-java">@Test  
public void test1() {  
    TimeZone timeZone = TimeZone.getDefault();  
    long timestamp = System.currentTimeMillis();  
    Date now = new Date();  
    System.out.println(&quot;当前时区:&quot; + timeZone);  
    System.out.println(&quot;当前时间戳:&quot; + timestamp);  
    System.out.println(&quot;当前 Date:&quot; + now);  
    System.out.println(&quot;时间戳和 Date 比较:&quot; + (timestamp == now.getTime()));  
}
</code></pre>
<p>运行结果如下：</p>
<pre><code class="language-text">当前时区:sun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,offset=28800000,dstSavings=0,useDaylight=false,transitions=31,lastRule=null]
当前时间戳:1691847447812
当前 Date:Sat Aug 12 21:37:27 CST 2023
时间戳和 Date 比较:true
</code></pre>
<p>可以看到当前 JVM 默认时区是<strong>Asia/Shanghai</strong>，从 Date 中获取的时间戳和从系统<code>System.currentTimeMillis</code>获取的时间戳是一致的。
看看 Date 的代码：</p>
<pre><code class="language-java">private transient long fastTime;

public Date() {  
    this(System.currentTimeMillis());  
}

public Date(long date) {  
    fastTime = date;  
}

public String toString() {  
    // &quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;;  
    BaseCalendar.Date date = normalize();  
    StringBuilder sb = new StringBuilder(28);  
    int index = date.getDayOfWeek();  
    if (index == BaseCalendar.SUNDAY) {  
        index = 8;  
    }  
    convertToAbbr(sb, wtb[index]).append(' ');                        // EEE  
    convertToAbbr(sb, wtb[date.getMonth() - 1 + 2 + 7]).append(' ');  // MMM  
    CalendarUtils.sprintf0d(sb, date.getDayOfMonth(), 2).append(' '); // dd  

    CalendarUtils.sprintf0d(sb, date.getHours(), 2).append(':');   // HH  
    CalendarUtils.sprintf0d(sb, date.getMinutes(), 2).append(':'); // mm  
    CalendarUtils.sprintf0d(sb, date.getSeconds(), 2).append(' '); // ss  
    TimeZone zi = date.getZone();  
    if (zi != null) {  
        sb.append(zi.getDisplayName(date.isDaylightTime(), TimeZone.SHORT, Locale.US)); // zzz  
    } else {  
        sb.append(&quot;GMT&quot;);  
    }  
    sb.append(' ').append(date.getYear());  // yyyy  
    return sb.toString();  
}
</code></pre>
<p>Date 中存放了一个时间戳的成员变量，默认的构造方法就是当前时间戳。由于计算机运行很快，所以两次获取的当前时间戳是一致的。
再看看 Date 的 <code>toString</code> 方法，该方法是将 Date 对象格式化为<code>EEE MMM dd HH:mm:ss zzz yyyy</code>字符串，中文含义为<strong>星期 月份
当月天数 小时 分钟 秒 时区 年份</strong>。
为什么打印的 Date 时区是 <strong>CST</strong>，而当前时区却是 <strong>Asia/Shanghai</strong>
呢？其实这里做了一层转换，就是代码<code>zi.getDisplayName(date.isDaylightTime(), TimeZone.SHORT, Locale.US)</code>
，只是展示的名字不同罢了，其实都是一样的。</p>
<h3 id="date_1">不同时区对 Date 有什么影响</h3>
<pre><code class="language-java">@Test  
public void test2() {  
    TimeZone timeZone = TimeZone.getDefault();  
    System.out.println(&quot;以下是默认时区：&quot; + timeZone);  
    System.out.println(&quot;当前 Date:&quot; + new Date());  
    System.out.println(&quot;--------------&quot;);  

    // 修改时区为 UTC    
    TimeZone utcTimeZone = TimeZone.getTimeZone(&quot;UTC&quot;);  
    TimeZone.setDefault(utcTimeZone);  
    System.out.println(&quot;以下是 UTC 时区：&quot; + utcTimeZone);  
    System.out.println(&quot;当前 UTC Date:&quot; + new Date());  
    System.out.println(&quot;--------------&quot;);  

    // 修改时区为 UTC+8    
    TimeZone utc8TimeZone = TimeZone.getTimeZone(&quot;UTC+8&quot;); 
    TimeZone.setDefault(utc8TimeZone);  
    System.out.println(&quot;以下是 UTC+8（错误的）时区&quot; + utc8TimeZone);  
    System.out.println(&quot;当前 UTC+8 Date:&quot; + new Date());  
    System.out.println(&quot;--------------&quot;);  

    // 修改时区为 GMT    
    TimeZone gmtTimeZone = TimeZone.getTimeZone(&quot;GMT&quot;);  
    TimeZone.setDefault(gmtTimeZone);  
    System.out.println(&quot;以下是 GMT 时区：&quot; + gmtTimeZone);  
    System.out.println(&quot;当前 GMT Date:&quot; + new Date());  
    System.out.println(&quot;--------------&quot;);  

    // 修改时区为 GMT+8    
    TimeZone gmt8TimeZone = TimeZone.getTimeZone(&quot;GMT+8&quot;); 
    TimeZone.setDefault(gmtTimeZone);  
    System.out.println(&quot;以下是 GMT+8 时区：&quot; + gmt8TimeZone);  
    System.out.println(&quot;当前 GMT+8 Date:&quot; + new Date());  
}
</code></pre>
<p>上面的代码运行出来的结果如下：</p>
<pre><code class="language-text">以下是默认时区：sun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,offset=28800000,dstSavings=0,useDaylight=false,transitions=31,lastRule=null]
当前 Date:Sat Aug 12 22:21:48 CST 2023
--------------
以下是 UTC 时区：sun.util.calendar.ZoneInfo[id=&quot;UTC&quot;,offset=0,dstSavings=0,useDaylight=false,transitions=0,lastRule=null]
当前 UTC Date:Sat Aug 12 14:21:48 UTC 2023
--------------
以下是 UTC+8（错误的）时区：：sun.util.calendar.ZoneInfo[id=&quot;GMT&quot;,offset=0,dstSavings=0,useDaylight=false,transitions=0,lastRule=null]
当前 UTC+8 Date:Sat Aug 12 14:21:48 GMT 2023
--------------
以下是 GMT 时区：sun.util.calendar.ZoneInfo[id=&quot;GMT&quot;,offset=0,dstSavings=0,useDaylight=false,transitions=0,lastRule=null]
当前 GMT Date:Sat Aug 12 14:21:48 GMT 2023
--------------
以下是 GMT+8 时区：sun.util.calendar.ZoneInfo[id=&quot;GMT+08:00&quot;,offset=28800000,dstSavings=0,useDaylight=false,transitions=0,lastRule=null]
当前 GMT+8 Date:Sat Aug 12 22:21:48 GMT+08:00 2023
</code></pre>
<p>这个结果就很有意思了，我们先确定几个常识或者说前提：</p>
<ol>
<li>东八区的时间是比 0 时区快 8 个小时的；</li>
<li>时间是个有绝对和相对的概念，绝对时间以 0 时区时间为准，在不同时区有着不同的叫法，但是表示的是同一时刻；</li>
</ol>
<p>然后在这个基础上我们分析上面的结果：</p>
<ol>
<li>默认时区是 <strong>Asia/Shanghai</strong>，当前时间为<strong>2023-08-12 22:21:48</strong>，CST 中国时区，北京时间，没有问题；</li>
<li>修改时区为 <strong>UTC</strong>，当前时间为<strong>2023-08-12 14:21:48</strong>，UTC 时区，比北京时间晚八个小时，也是对的；</li>
<li>修改时区为 <strong>UTC+8</strong>，当前时间为<strong>2023-08-12 14:21:48</strong>，GMT 时区，比北京时间晚八个小时。这里就有问题了，为什么设置了
   UTC+8，但是时区却是 GMT 时区？这个问题先记下后面再看；</li>
<li>修改时区为 <strong>GMT</strong>，当前时间为<strong>2023-08-12 14:21:48</strong>，GMT 时区，比北京时间晚八个小时，也是对的；</li>
<li>修改时区为 <strong>GMT+8</strong>，当前时间为<strong>2023-08-12 22:21:48</strong>，GMT+8 时区，也是对的；</li>
</ol>
<p>那么现在来分析为什么设置 <strong>UTC+8</strong>，但是时区却是 <strong>GMT</strong>，看看代码：</p>
<pre><code class="language-java">private static TimeZone getTimeZone(String ID, boolean fallback) {  
    TimeZone tz = ZoneInfo.getTimeZone(ID);  
    if (tz == null) {  
        tz = parseCustomTimeZone(ID);  
        if (tz == null &amp;&amp; fallback) {  
            tz = new ZoneInfo(GMT_ID, 0);  
        }  
    }  
    return tz;  
}
</code></pre>
<ol>
<li>第一步获取默认的时区枚举，很遗憾，默认的时区枚举根本没有 UTC+8，默认的可用时区可以通过 <code>TimeZone.getAvailableIDs()</code> 获取；</li>
<li>第二步是解析自定义的时区，还是很遗憾，自定义的时区只支持 GMT 开头的，所以返回默认的时区 GMT；</li>
</ol>
<h3 id="jackson">Jackson 时间序列化盲点</h3>
<p>准备一个 java 模型类</p>
<pre><code class="language-java">@Getter  
@Setter  
public class Model {  
    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)  
    private Date created;  
    private Date modified;  

    private void setDate(Date date) {  
        System.out.println(&quot;设置时间为:&quot; + date);  
        this.created = date;  
        this.modified = date;  
    }  
}
</code></pre>
<p>该类有两个成员变量，一个加了 JsonFormat 注解，另一个没有加，时间默认为当前时间。</p>
<h4 id="string">将对象转 String</h4>
<pre><code class="language-java">@Test  
public void test1() throws JsonProcessingException {  
    System.out.println(&quot;当前时区：&quot; + TimeZone.getDefault());  
    Model model = new Model();  
    ObjectMapper objectMapper = new ObjectMapper();  
    System.out.println(objectMapper.writeValueAsString(model));  
}
</code></pre>
<p>运行结果如下：</p>
<pre><code class="language-text">当前时区:sun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,offset=28800000,dstSavings=0,useDaylight=false,transitions=31,lastRule=null]
设置时间为:Sun Aug 13 11:15:14 CST 2023
输出结果:{&quot;created&quot;:&quot;2023-08-13 03:15:14&quot;,&quot;modified&quot;:1691896514868}
</code></pre>
<p>从输出结果中可以看到两个问题：</p>
<ol>
<li>可以看到当前时区为东八区，加了 JsonFormat 注解的字段 created 按格式输出了，但是结果却是 0 时区的时间，而不是当前时区的时间；</li>
<li>没有加注解的 modified 输出了时间戳。</li>
</ol>
<p>探索一下，可以在 JsonFormat 注解中发现一个参数 <code>timezone</code>，注释如下：</p>
<pre><code>TimeZone to use for serialization (if needed). Special value of DEFAULT_TIMEZONE can be used to mean &quot;just use the default&quot;, where default is specified by the serialization context, which in turn defaults to system default (UTC) unless explicitly set to another timezone.
</code></pre>
<p>翻译过来就是这个参数可以指定序列化的时区，如果没有指定，默认是 UTC 时区（这里不是用的 Jvm 中的 TimeZone），这个默认值可以修改。</p>
<p>第二个问题是因为 modified 字段没有指定序列化的格式，所以默认加上了参数<code>SerializationFeature.WRITE_DATES_AS_TIMESTAMPS</code>，将
Date 输出为时间戳。代码看 <code>DateTimeSerializerBase</code> 类
<img alt="5cCZEC" src="https://qiqiang.oss-cn-hangzhou.aliyuncs.com/muan/5cCZEC.png" /></p>
<p><img alt="oMsKHF" src="https://qiqiang.oss-cn-hangzhou.aliyuncs.com/muan/oMsKHF.png" />
但是 Jackson 可以指定默认 Date 默认的序列化格式</p>
<p>那么试一下改过后的代码：</p>
<pre><code class="language-java">@Getter  
@Setter  
public class ModelA {  
    @JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;GMT+7&quot;)  
    private Date created;  
    private Date modified;  

    private void setDate(Date date) {  
        System.out.println(&quot;设置时间为:&quot; + date);  
        this.created = date;  
        this.modified = date;  
    }  
}

@Test  
public void test2() throws JsonProcessingException {  
    System.out.println(&quot;当前时区:&quot; + TimeZone.getDefault());  
    ModelA model = new ModelA();  
    ObjectMapper objectMapper = new ObjectMapper();  
    // 指定格式化样式
    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;);  
    objectMapper.setDateFormat(dateFormat);  
    // 设置时区为东八区
    objectMapper.setTimeZone(TimeZone.getTimeZone(&quot;GMT+8&quot;));  
    System.out.println(&quot;输出结果:&quot; + objectMapper.writeValueAsString(model));  
    System.out.println(&quot;-------------&quot;);  
    System.out.println(&quot;设置时区为 0 时区&quot;);  
    // 设置时区为 0 时区
    TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT&quot;));  
    objectMapper.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));  
    System.out.println(&quot;输出结果:&quot; + objectMapper.writeValueAsString(model));  
}
</code></pre>
<p>这里指定了字段 created 的序列化格式为<code>yyyy-MM-dd HH:mm:ss</code>，并且指定了时区为 GMT+7（东七区，比北京时间早一个小时），然后设置了
Date 默认的序列化格式为<code>yyyy/MM/dd HH:mm:ss</code>，可以看一下结果：</p>
<pre><code class="language-text">当前时区:sun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,offset=28800000,dstSavings=0,useDaylight=false,transitions=31,lastRule=null]
设置时间为:Sun Aug 13 11:16:37 CST 2023
输出结果:{&quot;created&quot;:&quot;2023-08-13 10:16:37&quot;,&quot;modified&quot;:&quot;2023/08/13 11:16:37&quot;}
-------------
设置时区为 0 时区
输出结果:{&quot;created&quot;:&quot;2023-08-13 10:16:37&quot;,&quot;modified&quot;:&quot;2023/08/13 03:16:37&quot;}
</code></pre>
<ol>
<li>当前时区还是东八区，时间为 <code>2023-08-13 11:16:37</code>；</li>
<li>单独指定了序列化格式和时区的字段比当前时间早一个小时，而默认的时间 modified 按默认格式和时区输出了；</li>
<li>设置 0 时区后，加了注解的字段序列化没有变化，序列化配置以注解为准，但是 modified 以 0 时区序列化了；</li>
</ol>
<h4 id="string_1">将 String 转对象</h4>
<pre><code class="language-java">@Test  
public void test3() throws JsonProcessingException {  
    System.out.println(&quot;当前时区:&quot; + TimeZone.getDefault());  
    String json = &quot;{\&quot;created\&quot;:\&quot;2023-08-12 12:56:46\&quot;,\&quot;modified\&quot;:\&quot;2023/08/12 12:56:46\&quot;}&quot;;  
    System.out.println(&quot;原字符串:&quot; + json);  
    ObjectMapper objectMapper = new ObjectMapper();  
    System.out.println(&quot;--------------&quot;);  
    objectMapper.setDateFormat(new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;));  
    // 按 0 时区区算  
    System.out.println(&quot;设置按 0 时区序列化&quot;);  
    objectMapper.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));  
    Model model2 = objectMapper.readValue(json, Model.class);  
    TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT&quot;));  
    System.out.println(&quot;输出 created:&quot; + model2.getCreated());  
    System.out.println(&quot;输出 modified:&quot; + model2.getModified());  
    System.out.println(&quot;--------------&quot;);  
    // 按东八区算  
    System.out.println(&quot;设置按东八区序列化&quot;);  
    objectMapper.setTimeZone(TimeZone.getTimeZone(&quot;GMT+8&quot;));  
    Model model = objectMapper.readValue(json, Model.class);  
    TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT+8&quot;));  
    System.out.println(&quot;输出 created:&quot; + model.getCreated());  
    System.out.println(&quot;输出 modified:&quot; + model.getModified());  
}
</code></pre>
<p>定义一个字符串，字符串里的时间只是一个符号，并没有任何时区的概念，所以转换为 Date 的时候，这个概念会变成某时区的某时间，运行结果如下：</p>
<pre><code class="language-text">当前时区:sun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,offset=28800000,dstSavings=0,useDaylight=false,transitions=31,lastRule=null]
原字符串:{&quot;created&quot;:&quot;2023-08-12 12:56:46&quot;,&quot;modified&quot;:&quot;2023/08/12 12:56:46&quot;}
--------------
设置按 0 时区序列化
输出 created:Sat Aug 12 12:56:46 GMT 2023
输出 modified:Sat Aug 12 12:56:46 GMT 2023
--------------
设置按东八区序列化
输出 created:Sat Aug 12 20:56:46 GMT+08:00 2023
输出 modified:Sat Aug 12 12:56:46 GMT+08:00 2023
</code></pre>
<p>分析结果：</p>
<ol>
<li>当前时区东八区，created 加了注解未指定时区，modified 未加注解，字符串时间为<code>2023-08-12 12:56:46</code>；</li>
<li>设置默认反序列化时区为 0 时区，转为对象之后，都是0 时区的 <code>2023-08-12 12:56:46</code>；</li>
<li>设置默认反序列化时区为东八区，转为对象之后，created 是东八区的 <code>2023-08-12 20:56:46</code>，也就是 0
   时区的<code>2023-08-12 12:56:46</code>，这个时间明显跟期望不一致，我们期望得到的是东八区的<code>2023-08-12 12:56:46</code>，<em>
   </em>这个问题我们用下一个测试用例验证一下**。modified 是东八区的<code>2023-08-12 12:56:46</code>，这个是正确的；</li>
</ol>
<p>将上面的代码改变一下，设置东八区序列化重新 new 一个 ObjectMapper：</p>
<pre><code class="language-java">System.out.println(&quot;当前时区:&quot; + TimeZone.getDefault());  
String json = &quot;{\&quot;created\&quot;:\&quot;2023-08-12 12:56:46\&quot;,\&quot;modified\&quot;:\&quot;2023/08/12 12:56:46\&quot;}&quot;;  
System.out.println(&quot;原字符串:&quot; + json);  
System.out.println(&quot;--------------&quot;);  
// 按0 时区区算  
ObjectMapper objectMapper = new ObjectMapper();  
objectMapper.setDateFormat(new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;));  
System.out.println(&quot;设置按 0 时区序列化&quot;);  
objectMapper.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));  
Model model2 = objectMapper.readValue(json, Model.class);  
TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT&quot;));  
System.out.println(&quot;输出 created:&quot; + model2.getCreated());  
System.out.println(&quot;输出 modified:&quot; + model2.getModified());  
System.out.println(&quot;--------------&quot;);  
// 按东八区算  
System.out.println(&quot;设置按东八区序列化&quot;);  
ObjectMapper objectMapper2 = new ObjectMapper();  
objectMapper2.setDateFormat(new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;));  
objectMapper2.setTimeZone(TimeZone.getTimeZone(&quot;GMT+8&quot;));  
Model model = objectMapper2.readValue(json, Model.class);  
TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT+8&quot;));  
System.out.println(&quot;输出 created:&quot; + model.getCreated());  
System.out.println(&quot;输出 modified:&quot; + model.getModified());
</code></pre>
<p>得到结果如下：</p>
<pre><code class="language-text">当前时区:sun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,offset=28800000,dstSavings=0,useDaylight=false,transitions=31,lastRule=null]
原字符串:{&quot;created&quot;:&quot;2023-08-12 12:56:46&quot;,&quot;modified&quot;:&quot;2023/08/12 12:56:46&quot;}
--------------
设置按 0 时区序列化
输出 created:Sat Aug 12 12:56:46 GMT 2023
输出 modified:Sat Aug 12 12:56:46 GMT 2023
--------------
设置按东八区序列化
输出 created:Sat Aug 12 12:56:46 GMT+08:00 2023
输出 modified:Sat Aug 12 12:56:46 GMT+08:00 2023
</code></pre>
<p>分析一下结果：</p>
<ol>
<li>当前时区东八区，created 加了注解未指定时区，modified 未加注解，字符串时间为<code>2023-08-12 12:56:46</code>；</li>
<li>构建一个 ObjectMapper 并设置默认反序列化时区为 0 时区，转为对象之后，都是 0 时区的 <code>2023-08-12 12:56:46</code>；</li>
<li>构建一个 ObjectMapper 并设置默认反序列化时区为东八区，转为对象之后，都是 东八区的 <code>2023-08-12 12:56:46</code>，也就是 0
   时区的<code>2023-08-12 04:56:46</code>，所以问题出现在<strong>加了注解的默认时区根本没有改变</strong>；</li>
</ol>
<p>其实<code>objectMapper.setTimeZone(TimeZone.getTimeZone("GMT"))</code>这行代码没有生效的原因是因为同一个 ObjectMapper
对象中对同一个类的反序列化做了缓存，设置时区也无法对加了注解的字段生效。此时如果将字符串反序列化到另一个类是可以的，因为没有缓存。</p>
<h3 id="spring-datetimeformat">Spring 中的 DateTimeFormat 到底怎么用</h3>
<p>很多人不知道 Spring 中的注解 DateTimeFormat 和 Jackson 中的 JsonFormat 到底有什么区别，什么时候该用什么。</p>
<p>其实这个问题很简单，Spring 接收 Http 请求参数有两种方式，一种是基于表单或者 url 上的参数即 params 方式，另一种是 body
方式，这两种方式就决定了 Spring 怎么反序列化入参了。</p>
<h4 id="param">表单或 Param 方式</h4>
<p>这种方式的代码可以查看 <code>org.springframework.beans.AbstractNestablePropertyAccessor</code>
的视线，原理是将每个字段转换为模型对象的属性。这时候就是 <code>DateTimeFormat</code> 生效的时候。</p>
<h4 id="body">Body 方式</h4>
<p>因为 Spring 接收到 Json Body 之后，其实是一串字符串，这时候是不知道哪个字段该映射到哪个模型对象的属性上的，所以需要借助于三方的
Json 序列化工具，比如 Jackson 或者 Fastjson。这时候 <code>JsonFormat</code> 就生效了，这时候的配置就回到了 Jackson ObjectMapper
的配置了，但是 Spring 序列化有自己的 ObjectMapper 实例，可以根据配置文件来进行配置。</p>
<p>同理，因为 http 返回的 Body
是文本，所以这种方式是将模型对象序列化为字符串，这个也是借助于序列化工具来的，所以生效的也是 <code>JsonFormat</code>。</p>
<h3 id="_2">接口中的时间字段怎么交互最合理</h3>
<p>在接口对接中，经常会有时间字段的接口交互，很多情况下我们是通过字符串来交互的，即格式化成<code>2022-03-09 00:13:00</code>，但是这样的字符串无法标识是哪个时区的时间，即无法标识绝对时间。
这种情况下就需要对接的双方清楚两边的所在时区在哪里，这样很明显是不合理的。有一下几种方式可以解决交互问题：</p>
<ol>
<li>双方约定时区，以字符串交互，这种方式成本太大，但是在国内使用时没有问题的；</li>
<li>以时间戳进行交互，这样输出和输入都是绝对时间，接收方可以将时间戳转换为自己服务时区来进行操作（比如用 Jackson 序列化的时候不要加注解）。
   方式这种对前端交互不够友好，人眼无法一眼看出来时间，可读性太弱。另外提一点，Spring 对 Date 类型的不会默认序列化成时间戳，具体代码看下面，它修改了 Jackson 会默认序列化成时间戳的行为；
   <img alt="UQVEII" src="https://qiqiang.oss-cn-hangzhou.aliyuncs.com/muan/UQVEII.png" /></li>
<li>用带有时区的字符串格式来表示，如<code>OffsetDateTime</code>，这个类里面维护了<code>LocalDateTime</code>和<code>ZoneOffset</code>，可以表示时间和时区。这样通过序列化够可以将时间转换为<code>2023-08-18T10:43:00.591+08:00</code>,
接收方如果在 0 时区，可以将这个字符串反序列化为0 时区的时间，如<code>2023-08-18T02:43:00.591Z</code>。这种方式可读性强，也能标识时间的绝对性，在国际化中使用的较多。</li>
</ol>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.expand"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>