---
title: Macos-minikube
date: 2022-06-02 18:53:20
permalink: /pages/dab1f6/
---
# Macos æ­å»º minikube ç©è½¬ k8s

## ä»‹ç»

å®˜ç½‘ [minikube start](https://minikube.sigs.k8s.io/docs/start/)

## æ­å»º

1. å®‰è£…

```bash
$ curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-arm64
$ sudo install minikube-darwin-arm64 /usr/local/bin/minikube
```

2. å¯åŠ¨

```bash
# ä¸€ç›´æ— æ³•æ‹‰å–é•œåƒ
$ minikube start
```

éœ€è¦å°†é•œåƒä¸­å¿ƒæ”¹ä¸ºä¸­å›½

```bash
# å…ˆåˆ é™¤ï¼ŒåŠ å‚æ•°é‡æ–°å¯åŠ¨
$ minikube delete
$ minikube start --image-mirror-country='cn'
```

ç»“æœè¿˜æ˜¯ä¸è¡Œï¼Œæ‰¾èµ„æ–™ï¼Œéœ€è¦åŠ é©±åŠ¨

```bash
# è®¾ç½®å…¨å±€é©±åŠ¨
$ minikube config set driver docker
â—  These changes will take effect upon a minikube delete and then a minikube start
# æˆ–è€…æŒ‡å®šé©±åŠ¨å¯åŠ¨
$ minikube start --image-mirror-country='cn' --dirver=docker
```

è¿™æ¬¡æˆåŠŸäº†ã€‚

è®¾ç½®ä¸€ä¸‹è‡ªå·±çš„ shell

```bash
alias kubectl="minikube kubectl --"
```

## éƒ¨ç½²åº”ç”¨

1. åˆ›å»ºpod

```bash
$ kubectl create deployment game2048 --image=daocloud.io/daocloud/dao-2048:latest
deployment.apps/game2048 created
$ kubectl get pod
NAME                              READY   STATUS    RESTARTS   AGE
hello-minikube-56964d98c6-tckdm   1/1     Running   0          13s
```

2. åˆ›å»º service

```bash
$ kubectl expose deployment game2048 --type=NodePort --port=80
service/game2048 exposed
```

å¦‚ä½•è®¿é—®æœåŠ¡å‘¢ï¼Ÿ

```bash
$ minikube service game2048 
|-----------|----------------|-------------|---------------------------|
| NAMESPACE |      NAME      | TARGET PORT |            URL            |
|-----------|----------------|-------------|---------------------------|
| default   | game2048 |          80 | http://192.168.49.2:30148 |
|-----------|----------------|-------------|---------------------------|
ğŸƒ  Starting tunnel for service hello-minikube.
|-----------|----------------|-------------|------------------------|
| NAMESPACE |      NAME      | TARGET PORT |          URL           |
|-----------|----------------|-------------|------------------------|
| default   | game2048 |             | http://127.0.0.1:63167 |
|-----------|----------------|-------------|------------------------|
ğŸ‰  Opening service default/game2048 in default browser...
â—  Because you are using a Docker driver on darwin, the terminal needs to be open to run it.
```

è®¿é—® [http://127.0.0.1:63167](http://127.0.0.1:63167)

æˆ–è€…é€šè¿‡ç«¯å£è½¬å‘æ–¹å¼

```bash
$ kubectl port-forward service/game2048 4433:80  
Forwarding from 127.0.0.1:4433 -> 80
Forwarding from [::1]:4433 -> 80
```

è®¿é—® [http://127.0.0.1:4433](http://127.0.0.1:4433)

## æ§åˆ¶å°

```bash
$ minikube dashboard
```
